{"version":3,"file":"bg-cover.umd.js","sources":["../src/index.js"],"sourcesContent":["export function scale(parentSize, childSize, child) {\r\n    let scaleParent = parentSize.height / parentSize.width,\r\n        scaleChild = childSize.height / childSize.width,\r\n        scale = scaleChild > scaleParent ? 1 : scaleParent / scaleChild;\r\n\r\n    child.style.width = \"100%\";\r\n    child.style.position = \"absolute\";\r\n    child.style.left = \"50%\";\r\n    child.style.top = \"50%\";\r\n    child.style.transform = `translate(-50%,-50%) scale(${scale})`;\r\n    child.style.objectFit = \"cover\";\r\n}\r\n\r\nexport default function cover(element) {\r\n    let parent = element.parentElement,\r\n        position = window.getComputedStyle(parent).position,\r\n        load,\r\n        parentSize = {\r\n            width: parent.clientWidth,\r\n            height: parent.clientHeight\r\n        };\r\n\r\n    if (!/relative|fixer|absolute/.test(position)) {\r\n        parent.style.position = \"relative\";\r\n    }\r\n\r\n    parent.style.overflow = \"hidden\";\r\n    element.style.width = \"100%\";\r\n    switch (element.nodeName) {\r\n        case \"VIDEO\":\r\n            load = () =>\r\n                scale(\r\n                    parentSize,\r\n                    {\r\n                        width: element.videoWidth,\r\n                        height: element.videoHeight\r\n                    },\r\n                    element\r\n                );\r\n            //   loadeddata => loadedmetadata\r\n            element.readyState === 4\r\n                ? load()\r\n                : element.addEventListener(\"loadedmetadata\", load);\r\n            break;\r\n        case \"IMG\":\r\n            load = () =>\r\n                scale(\r\n                    parentSize,\r\n                    {\r\n                        width: element.clientWidth,\r\n                        height: element.clientHeight\r\n                    },\r\n                    element\r\n                );\r\n            element.complete ? load() : element.addEventListener(\"load\", load);\r\n            break;\r\n    }\r\n    if (!element.dataset.coverResize) {\r\n        element.dataset.coverResize = \"listener\";\r\n        window.addEventListener(\"resize\", () => cover(element));\r\n    }\r\n}\r\n"],"names":["scale","parentSize","childSize","child","let","scaleParent","height","width","scaleChild","style","position","left","top","transform","objectFit","cover","element","load","parent","parentElement","window","getComputedStyle","clientWidth","clientHeight","test","overflow","nodeName","videoWidth","videoHeight","readyState","addEventListener","complete","dataset","coverResize"],"mappings":"sKAAO,SAASA,EAAMC,EAAYC,EAAWC,GACzCC,IAAIC,EAAcJ,EAAWK,OAASL,EAAWM,MAC7CC,EAAaN,EAAUI,OAASJ,EAAUK,MAC1CP,EAAQQ,EAAaH,EAAc,EAAIA,EAAcG,EAEzDL,EAAMM,MAAMF,MAAQ,OACpBJ,EAAMM,MAAMC,SAAW,WACvBP,EAAMM,MAAME,KAAO,MACnBR,EAAMM,MAAMG,IAAM,MAClBT,EAAMM,MAAMI,UAAY,8BAA8Bb,MACtDG,EAAMM,MAAMK,UAAY,eAGb,SAASC,EAAMC,GAC1BZ,IAEIa,EAFAC,EAASF,EAAQG,cACjBT,EAAWU,OAAOC,iBAAiBH,GAAQR,SAE3CT,GACIM,MAAOW,EAAOI,YACdhB,OAAQY,EAAOK,cASvB,OANK,0BAA0BC,KAAKd,KAChCQ,EAAOT,MAAMC,SAAW,YAG5BQ,EAAOT,MAAMgB,SAAW,SACxBT,EAAQP,MAAMF,MAAQ,OACdS,EAAQU,UACZ,IAAK,QACDT,oBACIjB,EACIC,GAEIM,MAAOS,EAAQW,WACfrB,OAAQU,EAAQY,aAEpBZ,IAGe,IAAvBA,EAAQa,WACFZ,IACAD,EAAQc,iBAAiB,iBAAkBb,GACjD,MACJ,IAAK,MACDA,oBACIjB,EACIC,GAEIM,MAAOS,EAAQM,YACfhB,OAAQU,EAAQO,cAEpBP,IAERA,EAAQe,SAAWd,IAASD,EAAQc,iBAAiB,OAAQb,GAGhED,EAAQgB,QAAQC,cACjBjB,EAAQgB,QAAQC,YAAc,WAC9Bb,OAAOU,iBAAiB,2BAAgBf,EAAMC"}